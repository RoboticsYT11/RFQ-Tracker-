{% extends "base.html" %}

{% block content %}
<div class="dashboard-container">
    <h2>Dashboard</h2>

    <div class="stats-grid"
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div class="card">
            <h3>Total RFQs</h3>
            <p style="font-size: 24px; font-weight: bold;">{{ stats.total_rfqs }}</p>
        </div>
        <div class="card">
            <h3>Pending Quotations</h3>
            <p style="font-size: 24px; font-weight: bold; color: #f57c00;">{{ stats.pending_quotes }}</p>
        </div>
        <div class="card">
            <h3>Won This Month</h3>
            <p style="font-size: 24px; font-weight: bold; color: #2e7d32;">{{ stats.won_month }}</p>
        </div>
    </div>

    <div class="charts-grid"
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
        <div class="card">
            <h3>RFQs by Status</h3>
            <canvas id="statusChart"></canvas>
        </div>
        <div class="card">
            <h3>Monthly Trends</h3>
            <canvas id="trendChart"></canvas>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Status Chart
    const statusCtx = document.getElementById('statusChart').getContext('2d');
    new Chart(statusCtx, {
        type: 'doughnut',
        data: {
            labels: {{ charts.status_labels | tojson }},
        datasets: [{
            data: {{ charts.status_data | tojson }},
        backgroundColor: [
            '#e0e0e0', '#ffe0e6', '#e8f5e9', '#fff3e0', '#c8e6c9', '#ffcdd2', '#e1bee7'
        ]
            }]
        }
    });

    // Trend Chart
    const trendCtx = document.getElementById('trendChart').getContext('2d');
    new Chart(trendCtx, {
        type: 'bar',
        data: {
            labels: {{ charts.trend_labels | tojson }},
        datasets: [{
            label: 'RFQs Received',
            data: {{ charts.trend_data | tojson }},
        backgroundColor: '#800020'
            }]
        }
    });
</script>
{% endblock %}