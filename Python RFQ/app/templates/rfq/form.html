{% extends "base.html" %}

{% block content %}
<div class="card">
    <div style="margin-bottom: 20px;">
        <h2>{{ 'Edit RFQ' if rfq else 'New RFQ' }}</h2>
    </div>

    <form method="POST" action="/rfq/new" class="rfq-form">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            <div class="form-group">
                <label for="customer_name">Customer Name *</label>
                <input type="text" id="customer_name" name="customer_name" required
                    value="{{ rfq.customer_name if rfq else '' }}">
            </div>

            <div class="form-group">
                <label for="rfq_received_date">RFQ Received Date *</label>
                <input type="date" id="rfq_received_date" name="rfq_received_date" required
                    value="{{ rfq.rfq_received_date.strftime('%Y-%m-%d') if rfq else '' }}">
            </div>

            <div class="form-group">
                <label for="company_name">Company Name</label>
                <input type="text" id="company_name" name="company_name" value="{{ rfq.company_name if rfq else '' }}">
            </div>

            <div class="form-group">
                <label for="product_project_name">Product/Project Name</label>
                <input type="text" id="product_project_name" name="product_project_name"
                    value="{{ rfq.product_project_name if rfq else '' }}">
            </div>

            <div class="form-group">
                <label for="assigned_engineer_id">Assigned Engineer</label>
                <select id="assigned_engineer_id" name="assigned_engineer_id">
                    <option value="">-- Select Engineer --</option>
                    {% for eng in engineers %}
                    <option value="{{ eng.id }}" {% if rfq and rfq.assigned_engineer_id==eng.id %}selected{% endif %}>{{
                        eng.full_name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="priority">Priority</label>
                <select id="priority" name="priority">
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                    <option value="High">High</option>
                    <option value="Critical">Critical</option>
                </select>
            </div>

            <div class="form-group">
                <label for="estimated_project_value">Estimated Value</label>
                <input type="number" id="estimated_project_value" name="estimated_project_value" step="0.01">
            </div>

            <div class="form-group">
                <label for="currency">Currency</label>
                <select id="currency" name="currency">
                    <option value="INR">INR</option>
                    <option value="USD">USD</option>
                    <option value="EUR">EUR</option>
                </select>
            </div>
        </div>

        <div class="form-group" style="margin-top: 20px;">
            <label for="remarks_notes">Remarks/Notes</label>
            <textarea id="remarks_notes" name="remarks_notes">{{ rfq.remarks_notes if rfq else '' }}</textarea>
        </div>

        <div style="margin-top: 30px; display: flex; gap: 10px;">
            <button type="submit" class="btn btn-primary">Save RFQ</button>
            <a href="/rfq" class="btn btn-secondary" style="text-decoration: none;">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}